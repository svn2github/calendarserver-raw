Index: twisted/python/filepath.py
===================================================================
--- twisted/python/filepath.py	(revision 19773)
+++ twisted/python/filepath.py	(working copy)
@@ -253,7 +253,10 @@
         return int(self.getStatusChangeTime())
 
 
+def passthru(x):
+    return x
 
+
 class FilePath(_PathHelper):
     """
     I am a path on the filesystem that only permits 'downwards' access.
@@ -286,9 +289,11 @@
     statinfo = None
     path = None
 
-    def __init__(self, path, alwaysCreate=False):
-        self.path = abspath(path)
+    def __init__(self, path, alwaysCreate=False, existsCached=None, isDirCached=None, normalizer=abspath):
+        self.path = normalizer(path)
         self.alwaysCreate = alwaysCreate
+        self.existsCached = existsCached
+        self.isDirCached = isDirCached
 
     def __getstate__(self):
         d = self.__dict__.copy()
@@ -297,17 +302,16 @@
         return d
 
     def child(self, path):
-        if platform.isWindows() and path.count(":"):
-            # Catch paths like C:blah that don't have a slash
-            raise InsecurePath("%r contains a colon." % (path,))
-        norm = normpath(path)
-        if slash in norm:
+        if slash in path:
             raise InsecurePath("%r contains one or more directory separators" % (path,))
-        newpath = abspath(joinpath(self.path, norm))
-        if not newpath.startswith(self.path):
+        newpath = joinpath(self.path, path)
+        if path in ('.', '..'):
             raise InsecurePath("%r is not a child of %s" % (newpath, self.path))
         return self.clonePath(newpath)
 
+    def clonePath(self, path):
+        return FilePath(path, normalizer=passthru)
+
     def preauthChild(self, path):
         """
         Use me if `path' might have slashes in it, but you know they're safe.
@@ -370,6 +374,11 @@
 
     # stat methods below
 
+    def changed(self):
+        self.statinfo = None
+        self.existsCached = None
+        self.isDirCached = None
+
     def restat(self, reraise=True):
         """
         Re-calculate cached effects of 'stat'.  To refresh information on this path
@@ -381,11 +390,22 @@
         """
         try:
             self.statinfo = stat(self.path)
+            self.existsCached = True
+            self.isDirCached = S_ISDIR(self.statinfo.st_mode)
         except OSError:
             self.statinfo = 0
+            self.existsCached = False
+            self.isDirCached = None
             if reraise:
                 raise
 
+    def getstatinfo(self):
+        st = self.statinfo
+        if not st:
+            self.restat()
+            st = self.statinfo
+        return st
+
     def getsize(self):
         st = self.statinfo
         if not st:
@@ -437,7 +457,9 @@
 
 
     def exists(self):
-        if self.statinfo:
+        if self.existsCached is not None:
+            return self.existsCached
+        elif self.statinfo:
             return True
         elif self.statinfo is None:
             self.restat(False)
@@ -446,6 +468,8 @@
             return False
 
     def isdir(self):
+        if self.isDirCached is not None:
+            return self.isDirCached
         st = self.statinfo
         if not st:
             self.restat(False)
@@ -496,7 +520,7 @@
             os.rmdir(self.path)
         else:
             os.remove(self.path)
-        self.restat(False)
+        self.changed()
 
     def makedirs(self):
         return os.makedirs(self.path)
@@ -600,7 +624,7 @@
     def moveTo(self, destination):
         try:
             os.rename(self.path, destination.path)
-            self.restat(False)
+            self.changed()
         except OSError, ose:
             if ose.errno == errno.EXDEV:
                 # man 2 rename, ubuntu linux 5.10 "breezy":
@@ -623,4 +647,3 @@
                 raise
 
 
-FilePath.clonePath = FilePath
