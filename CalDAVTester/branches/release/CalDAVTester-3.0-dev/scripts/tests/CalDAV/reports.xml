<?xml version="1.0" standalone="no"?>

<!DOCTYPE caldavtest SYSTEM "caldavtest.dtd">

<!--
 Copyright (c) 2006-2009 Apple Inc. All rights reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 -->

<caldavtest>
	<require-feature>
		<feature>caldav</feature>
	</require-feature>

	<start>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/1.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/1.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/2.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/2.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/3.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/3.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/4.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/4.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/5.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/5.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/6.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/6.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/7.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/7.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/8.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/8.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/9.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/9.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/10.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/10.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/11.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/11.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/12.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/12.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/13.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/13.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/14.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/14.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/15.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/15.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/18.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/18.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/19.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/19.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/20.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/20.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/21.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/21.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/22.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/22.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/101.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/101.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/102.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/102.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/103.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/103.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/104.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/104.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/105.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/105.txt</filepath>
			</data>
		</request>
		<request end-delete="yes">
			<method>PUT</method>
			<ruri>$calendarpath1:/106.ics</ruri>
			<data>
				<content-type>text/calendar; charset=utf-8</content-type>
				<filepath>Resource/CalDAV/reports/put/106.txt</filepath>
			</data>
		</request>
	</start>
	
	<test-suite name='multiget reports' ignore='no'>
		<test name='1' ignore='no'>
			<description>basic multiget of 4 resources returning etag and entire ics data</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/1.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>101.ics</value>
						<value>102.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>basic multiget of 4 resources returning etag and only VCALENDAR property data (no embedded components)</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/2.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='3' ignore='no'>
			<description>basic multiget of 4 resources returning etag and only VTIMEZONE components</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/3.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='4' ignore='no'>
			<description>basic multiget of 4 resources returning etag and only SUMMARY/UID properties inside VEVENT components and VALARMs</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/4.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>101.ics</value>
						<value>102.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='5' ignore='no'>
			<description>as 4.txt except that the SUMMARY property value is not returned</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/5.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>101.ics</value>
						<value>102.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='6' ignore='no'>
			<description>Does allprop</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/6.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='7' ignore='no'>
			<description>Does propname</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/7.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='8' ignore='no'>
			<description>Single non-existent query</description>
			<request print-response="no">
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data substitutions='yes'>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/multiget/8.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>badhrefs</name>
						<value>bogus-resource.ics</value>
					</arg>
				</verify>
				<verify>
					<callback>xmlElementMatch</callback>
					<arg>
						<name>exists</name>
						<value>$verify-bad-response:[*404]</value>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<test-suite name='basic query reports' ignore='no'>
		<test name='1' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VEVENT defined</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/1.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>18.ics</value>
						<value>19.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VEVENT not defined</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/8.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>15.ics</value>
						<value>101.ics</value>
						<value>102.ics</value>
						<value>103.ics</value>
						<value>104.ics</value>
						<value>105.ics</value>
						<value>106.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='3' ignore='no'>
			<description>query for resources where the SUMMARY in a VEVENT contains the character '1'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/2.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>18.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='4' ignore='no'>
			<description>query for resources where the SUMMARY in a VEVENT does not contain the character '1'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/7.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>19.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='5' ignore='no'>
			<description>query for resources where the DESCRIPTION property exists in a VEVENT</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/3.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>2.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='6' ignore='no'>
			<description>query for resources where the DESCRIPTION property does not exist in a VEVENT</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/9.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>18.ics</value>
						<value>19.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='7' ignore='no'>
			<description>query for resources that have a DTSTART in a VEVENT that contains a TZID parameter containing the text 'Paci'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/4.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>3.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='8' ignore='no'>
			<description>query for resources that have a DTSTART in a VEVENT that contains a TZID parameter not containing the text 'Paci'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/10.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>19.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='9' ignore='no'>
			<description>query for resources that have a DTSTART in a VEVENT that contains a TZID parameter containing the text 'Paci' and 'Moun'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/5.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='10' ignore='no'>
			<description>query for resources where the SUMMARY in a VEVENT contains the character '4' and has a DTSTART in a VEVENT that contains a TZID parameter containing the text 'East'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/6.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>12.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='11' ignore='no'>
			<description>query for resources where the RECURRENCE-ID in a VEVENT does not contain a RANGE parameter</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/11.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>6.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='12' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VTODO defined</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/101.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>101.ics</value>
						<value>102.ics</value>
						<value>103.ics</value>
						<value>104.ics</value>
						<value>105.ics</value>
						<value>106.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='13' ignore='no'>
			<description>query for resources where the SUMMARY in a VTODO contains the character '1'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/102.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>101.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='14' ignore='no'>
			<description>query for resources that have a DUE in a VTODO that contains a TZID parameter containing the text 'East'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/103.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>102.ics</value>
						<value>104.ics</value>
						<value>106.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='15' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VEVENT and VTODO defined</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/201.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='16' ignore='no'>
			<description>query for resources where the SUMMARY in a VEVENT and VTODO contains the character '1'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/202.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='17' ignore='no'>
			<description>query for resources that have a DTSTART in a VEVENT with TZID containg 'Paci' and a DUE in a VTODO with TZID containing 'East'</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/203.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='18' ignore='no'>
			<description>query for VEVENTs that do not contain VALARMs</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/12.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>18.ics</value>
						<value>19.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='19' ignore='no'>
			<description>query for VEVENTs that contain a CATEGORY and filter by CATEGORY</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/13.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='20' ignore='no'>
			<description>query for VEVENTs that contain a CATEGORY but test with uppercase string</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/14.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='21' ignore='no'>
			<description>empty query</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/basicquery/15.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<test-suite name='query reports with filtered data' ignore='no'>
		<test name='1' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VEVENT defined - return filtered data</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/filtereddata/1.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
					</arg>
				</verify>
				<verify>
					<callback>dataString</callback>
					<arg>
						<name>notcontains</name>
						<value>DTSTAMP</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>query for resources with VCALENDAR &amp; VEVENT defined - return filtered data</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/filtereddata/2.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
					</arg>
				</verify>
				<verify>
					<callback>dataString</callback>
					<arg>
						<name>notcontains</name>
						<value>DTSTAMP</value>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<test-suite name='time-range query reports' ignore='no'>
		<test name='1' ignore='no'>
			<description>query for VEVENTs within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/1.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>19.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>query for VEVENT and VFREEBUSYs that have a CREATED/DTSTAMP within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/2.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='3' ignore='no'>
			<description>query for VEVENTs within time range with specific SUMMARY text</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/3.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='4' ignore='no'>
			<description>query for VEVENT recurrence instance within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/4.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>6.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='5' ignore='no'>
			<description>query for overridden VEVENT instance within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/5.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>6.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='6' ignore='no'>
			<description>query for overridden VEVENT not within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/6.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
				</verify>
			</request>
		</test>
		<test name='7' ignore='no'>
			<description>query for overridden this-and-future VEVENT within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/7.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>7.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='8' ignore='no'>
			<description>query for VTODOs within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/101.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>101.ics</value>
						<value>102.ics</value>
						<value>103.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='9' ignore='no'>
			<description>query for VTODOs within time range with specific SUMMARY text</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/102.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>102.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='10' ignore='no'>
			<description>query for VTODO recurrence instance within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/103.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>101.ics</value>
						<value>105.ics</value>
						<value>106.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='11' ignore='no'>
			<description>Invalid VTIMEZONE check</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/104.xml</filepath>
				</data>
				<verify>
					<callback>prepostcondition</callback>
					<arg>
						<name>error</name>
						<value>{urn:ietf:params:xml:ns:caldav}valid-calendar-data</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='12' ignore='no'>
			<description>query for VEVENTs within time range in distant future</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/8.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>19.ics</value>
						<value>21.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='13' ignore='no'>
			<description>query for VEVENTs within time range - no end</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/9.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>8.ics</value>
						<value>9.ics</value>
						<value>10.ics</value>
						<value>11.ics</value>
						<value>12.ics</value>
						<value>13.ics</value>
						<value>14.ics</value>
						<value>18.ics</value>
						<value>19.ics</value>
						<value>20.ics</value>
						<value>21.ics</value>
						<value>22.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='14' ignore='no'>
			<description>query for VEVENTs within time range - no start</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/10.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>1.ics</value>
						<value>2.ics</value>
						<value>3.ics</value>
						<value>4.ics</value>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>19.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='15' ignore='no'>
			<description>query for VEVENTs within time range - no start and no end</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/11.xml</filepath>
				</data>
				<verify>
					<callback>statusCode</callback>
					<arg>
						<name>status</name>
						<value>400</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='16' ignore='yes'> <!-- RRULE's now truncated -->
			<description>query for VEVENTs within time range - too many</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/12.xml</filepath>
				</data>
				<verify>
					<callback>prepostcondition</callback>
					<arg>
						<name>error</name>
						<value>{urn:ietf:params:xml:ns:caldav}number-of-recurrences-within-limits</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='17' ignore='no'>
			<description>query for free busy with overlapping and consecutive events</description>
			<request end-delete="yes">
				<method>PUT</method>
				<ruri>$calendarpath1:/23.ics</ruri>
				<data>
					<content-type>text/calendar; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/put/23.ics</filepath>
				</data>
				<verify>
					<callback>statusCode</callback>
				</verify>
			</request>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/13.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>23.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='18' ignore='no'>
			<description>query for VEVENTS and VTODOs within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/201.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='19' ignore='no'>
			<description>query for VEVENTS and VTODOs with start only</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/202.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
		<test name='20' ignore='no'>
			<description>query for VEVENTS with start only and all VTODOs</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/timerangequery/203.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<test-suite name='alarm time-range query reports' ignore='no'>
		<test name='1' ignore='no'>
			<description>query for VALARMS within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/alarmtimerangequery/1.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>query for repeating VALARMS within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/alarmtimerangequery/2.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>4.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='3' ignore='no'>
			<description>query for recurring VALARMS within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/alarmtimerangequery/3.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>7.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='4' ignore='no'>
			<description>query for recurring/overridden VALARMS within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/alarmtimerangequery/4.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='5' ignore='no'>
			<description>query for VALARMS on VTODO within time range</description>
			<request>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/alarmtimerangequery/5.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>102.ics</value>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<test-suite name='free-busy reports' ignore='no'>
		<test name='1' ignore='no'>
			<description>query for free busy with time range</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/freebusy/1.txt</filepath>
				</data>
				<verify>
					<callback>freeBusy</callback>
					<arg>
						<name>busy</name>
						<value>20060101T150000Z/20060101T160000Z</value>
						<value>20060101T180000Z/20060101T190000Z</value>
						<value>20060101T210000Z/20060101T220000Z</value>
						<value>20060101T230000Z/20060102T000000Z</value>
						<value>20060102T150000Z/20060102T160000Z</value>
						<value>20060103T150000Z/20060103T160000Z</value>
						<value>20060104T150000Z/20060104T160000Z</value>
						<value>20060102T190000Z/20060102T200000Z</value>
						<value>20060103T190000Z/20060103T200000Z</value>
						<value>20060104T210000Z/20060104T220000Z</value>
						<value>20060102T230000Z/20060103T000000Z</value>
						<value>20060103T230000Z/20060104T000000Z</value>
					</arg>
				</verify>
				<verify>
					<callback>dataString</callback>
					<arg>
						<name>notcontains</name>
						<value>METHOD:REPLY</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='no'>
			<description>query for free busy with overlapping and consecutive events</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/freebusy/2.txt</filepath>
				</data>
				<verify>
					<callback>freeBusy</callback>
					<arg>
						<name>busy</name>
						<value>20060107T010000Z/20060107T020000Z</value>
						<value>20060107T150000Z/20060107T163000Z</value>
						<value>20060108T150000Z/20060108T180000Z</value>
						<value>20060108T190000Z/20060108T193000Z</value>
					</arg>
					<arg>
						<name>unavailable</name>
						<value>20060108T130000Z/20060108T150000Z</value>
					</arg>
					<arg>
						<name>tentative</name>
						<value>20060108T160000Z/20060108T170000Z</value>
						<value>20060108T210000Z/20060108T213000Z</value>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>

	<test-suite name='limit/expand recurrence in reports' ignore='no'>
		<test name='1' ignore='yes'>
			<description>time-range query with limit over same range</description>
			<request print-response='yes'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/1.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='2' ignore='yes'>
			<description>time-range query with limit over different range</description>
			<request print-response='yes'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/2.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='3' ignore='no'>
			<description>time-range query with expand over same range</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/3.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>19.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='4' ignore='no'>
			<description>time-range query with expand over different range</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/4.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>5.ics</value>
						<value>6.ics</value>
						<value>7.ics</value>
						<value>19.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='5' ignore='no'>
			<description>query with limit-freebusy-set</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/5.txt</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>15.ics</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='6' ignore='no'>
			<description>query with expand all-day - no timezone</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/6.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
				</verify>
			</request>
		</test>
		<test name='7' ignore='no'>
			<description>query with expand all-day - timezone</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/7.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>18.ics</value>
					</arg>
				</verify>
				<verify>
					<callback>dataString</callback>
					<arg>
						<name>contains</name>
						<value>VEVENT</value>
					</arg>
				</verify>
			</request>
		</test>
		<test name='8' ignore='no'>
			<description>time-range query with expand for one event - DURATION test</description>
			<request print-response='no'>
				<method>REPORT</method>
				<ruri>$calendarpath1:/</ruri>
				<data>
					<content-type>text/xml; charset=utf-8</content-type>
					<filepath>Resource/CalDAV/reports/limitexpand/8.xml</filepath>
				</data>
				<verify>
					<callback>multistatusItems</callback>
					<arg>
						<name>okhrefs</name>
						<value>6.ics</value>
					</arg>
				</verify>
				<verify>
					<callback>dataString</callback>
					<arg>
						<name>contains</name>
						<value>DTSTART:20060102T190000Z</value>
						<value>DURATION:PT1H</value>
						<value>RECURRENCE-ID:20060103T190000Z</value>
						<value>DTSTART:20060103T190000Z</value>
						<value>RECURRENCE-ID:20060104T190000Z</value>
						<value>DTSTART:20060104T210000Z</value>
					</arg>
					<arg>
						<name>notcontains</name>
						<value>VTIEMZONE</value>
						<value>DTSTART:20060104T190000Z</value>
					</arg>
				</verify>
			</request>
		</test>
	</test-suite>
	
	<end/>
	
</caldavtest>
